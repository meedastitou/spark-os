{
    "settings": {
        "model": {
            "enable": false,
            "requestFrequency": 10,
            "ipAddress": "",
            "localAmsAddress": "",
            "amsAddress": "",
            "amsPort": 851,
            "multiReadEnabled": false,
            "multiReadRequestCount": 10,
            "deliverEntireResponse": false,
            "disconnectReportTime": 0,
            "publishDisabled": false,
            "connectionStatus": false
        },
        "schema": {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "type": "object",
            "title": "spark-hpl-beckhoff-ads",
            "properties": {
                "enable": {
                    "title": "Enable",
                    "description": "Enable/Disable the Beckhoff ADS Machine.",
                    "type": "boolean",
                    "required": true
                },
                "requestFrequency": {
                    "title": "Time between Requests (in seconds)",
                    "description": "The time to wait between each complete set of requests.",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 120,
                    "required": true
                },
                "localAmsAddress": {
                    "title": "Spark's local AMS Address",
                    "description": "The local AMS address of Spark.",
                    "type": "string",
                    "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){5}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",
                    "validationMessage": "Must be a valid AMS address",
                    "required": true
                },
                "ipAddress": {
                    "title": "ADS slave's IP Address",
                    "description": "The IP address of the ADS slave device.",
                    "type": "string",
                    "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",
                    "validationMessage": "Must be a valid IPv4 address",
                    "required": true
                },
                "amsAddress": {
                    "title": "ADS slave's AMS Address",
                    "description": "The AMS address of the ADS slave device.",
                    "type": "string",
                    "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){5}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",
                    "validationMessage": "Must be a valid AMS address",
                    "required": true
                },
                "amsPort": {
                    "title": "ADS slave's AMS Port",
                    "description": "The AMS Port number used on the slave device. Twincat 3 is 851, Twincat 2 uses 801",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 1000,
                    "required": true
                },
                "deliverEntireResponse": {
                    "title": "Deliver Entire Response",
                    "description": "Set to true to deliver the entire machine response as variable 'CombinedResult'",
                    "type": "boolean",
                    "default": false
                },
                "multiReadEnabled": {
                    "title": "Enable Multi-Read Request",
                    "description": "Set to true to enable the use requesting multiple variable reads in a signle request.  The number of requests in the multi-read is configured with 'Multi-Read Request Count'",
                    "type": "boolean",
                    "default": false
                },
                "multiReadRequestCount": {
                    "title": "Multi-Read Request Count",
                    "description": "The maximum number of variables that can be requested through the multi-read request",
                    "type": "integer",
                    "minimum": 2,
                    "maximum": 100,
                    "default": 10
                },
                "disconnectReportTime": {
                    "title": "Disconnect Report Time",
                    "description": "Time in seconds machine must be disconnected before any machine connected status variable becomes false",
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "required": true
                },
                "publishDisabled": {
                    "title": "Output Publish Disabled",
                    "description": "Whether or not this machine will be disabled for 'Publish' based output protocols e.g. AWS IoT",
                    "type": "boolean",
                    "required": true
                },
                "connectionStatus" : {
                  "title": "Connected",
                  "description": "Whether or not the Spark is connected to this machine",
                  "type": "boolean",
                  "readOnly": true
                }
            }
        },
        "form": [
            "enable",
            "requestFrequency",
            {
                "key": "localAmsAddress",
                "placeholder": "192.168.0.1.1.1"
            },
            {
                "key": "ipAddress",
                "placeholder": "192.168.0.1"
            },
            {
                "key": "amsAddress",
                "placeholder": "192.168.0.1.1.1"
            },
            {
                "key": "amsPort",
                "placeholder": "851"
            },
            "multiReadEnabled",
            {
               "condition": "model.multiReadEnabled==true",
               "key": "multiReadRequestCount"
            },
            "deliverEntireResponse",
            "disconnectReportTime",
            "publishDisabled",
            "connectionStatus"
        ]
    }
}
